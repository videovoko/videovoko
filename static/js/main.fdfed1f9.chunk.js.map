{"version":3,"sources":["firebase.js","utils/identify.js","sounds/join.mp3","sounds/message.mp3","contexts/AppContext/AppContext.jsx","assets/home-illustration.svg","components/balloon-button/BalloonButton.jsx","assets/logo.svg","components/logo/Logo.jsx","components/nav-bar/NavBar.jsx","components/modals/Modal.jsx","components/input/Input.jsx","components/button/Button.jsx","components/modals/RoomModal.jsx","pages/Home/Home.jsx","components/chat-message/ChatMessage.jsx","components/chat-input/ChatInput.jsx","components/chat/Chat.jsx","components/copyable-badge/CopyableBadge.jsx","components/modals/UserInfoModal.jsx","components/modals/SecondaryModal.jsx","components/modals/CallLinkModal.jsx","components/user-video-box/UserVideoBox.jsx","components/call-controls/CallControls.jsx","pages/CallRoom/CallRoom.jsx","App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","firestore","generateId","id","i","Math","ceil","random","setRoomId","window","location","hash","history","replaceState","getRoomId","substr","AppContext","createContext","AppContextProvider","children","useHistory","useSound","joinSfx","volume","playJoinSfx","messageSfx","playMessageSfx","useState","callLinkModalVisibility","setCallLinkModalVisibility","myName","_setMyName","myNameRef","useRef","guestName","setGuestName","sendMyUserInfo","info","isPeerConnected","data","JSON","stringify","sendToPeer","peer","peerConnection","setPeerConnection","setPeer","isInitiator","current","Peer","initiator","trickle","stream","localStream","config","iceServers","urls","on","name","stopListenAnswer","deleteSignal","console","log","warn","cleanGuestMediaStream","callType","nextRandomCall","destroy","waitSignalServerConnection","reconnectCall","err","error","a","sdp","roomId","pushOffer","setStopListenAnswer","listenAnswer","call","pushAnswer","guestStream","setGuestMediaStatus","video","audio","decodedData","TextDecoder","decode","type","corpus","addMessage","status","parse","isPeerSetted","connected","signalPeer","signal","send","destroyPeer","callsDB","collection","listenAnswerFinisher","finisher","callback","doc","get","then","catch","getSignal","getOffer","offer","undefined","getRandom","where","Date","now","calls","snapshot","forEach","String","updateSignalDate","update","date","signalDateRefresher","milliseconds","setTimeout","set","answer","onSnapshot","delete","cleanMessages","randomCall","randomSignal","getLocalStream","startRoom","joinRoom","Messages","setMessages","user","message","prevMessages","text","localMediaStatus","setLocalMediaStatus","guestMediaStatus","callbackParam","navigator","mediaDevices","getUserMedia","alert","replace","sendStatus","Provider","value","setMyName","finishCall","sendMessage","stopLocalStream","getTracks","track","stop","enableLocalVideo","getVideoTracks","enabled","prevStatus","newStatus","enableLocalAudio","getAudioTracks","disableLocalVideo","disableLocalAudio","_extends","Object","assign","target","arguments","length","source","key","prototype","hasOwnProperty","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","x","y","width","height","clipPath","d","fill","opacity","vectorEffect","cx","cy","r","SvgHomeIllustration","_ref","svgRef","title","titleId","props","xmlns","xmlnsXlink","style","isolation","viewBox","ref","ForwardRef","BalloonButton","side","classNames","onClick","className","SvgLogo","stroke","strokeMiterlimit","Logo","textColor","linkTo","to","NavBar","menuVisibility","setMenuVisibility","handleMenuVisibility","prev","href","rel","strokeLinecap","strokeLinejoin","strokeWidth","Modal","initialVisibility","visibility","setVisibility","e","prevVisibility","Input","placeholder","onChange","onKeyDown","maxLength","maxlength","Button","disabled","RoomModal","isValidId","test","useContext","Home","document","getElementById","click","ChatMessage","componentDecorator","ChatInput","onSend","setMessage","handleSubmit","preventDefault","trim","onSubmit","lastChar","toLowerCase","specialLetter","beforeSpecialLetter","slice","keyCode","shiftKey","Chat","messagesAnchor","useEffect","scrollIntoView","behavior","messageList","map","index","localUser","kk","CopyableBadge","buttonColor","clipboard","writeText","UserInfoModal","setName","querySelector","focus","submitName","autoFocus","SecondaryModal","onClose","CallLinkModal","origin","UserVideoBox","color","onClickVideo","videoRef","mediaStatus","srcObject","play","muted","CallControls","fillRule","clipRule","class","CallRoom","onbeforeunload","App","hashType","exact","path","render","match","params","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.fdfed1f9.chunk.js","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/analytics';\nimport 'firebase/firestore';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyC7Z7gv1LTtLw5ITSGESYrmHKJ2qWo1r0Q\",\n  authDomain: \"videovokodb.firebaseapp.com\",\n  projectId: \"videovokodb\",\n  storageBucket: \"videovokodb.appspot.com\",\n  messagingSenderId: \"979268679004\",\n  appId: \"1:979268679004:web:67da5584975065c0f9fd99\",\n  measurementId: \"G-0QDFJ7FG90\"\n};\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\nfirebase.analytics();\n\nconst firestore = firebase.firestore();\n\nexport { firestore };\nexport default firebase;","const generateId = () => {\n  let abc = 'abcdefghijklmnopqrstuvwxyz';\n  let id = '';\n  \n  for (let i = 0; i < 9; i++) {\n    if (i === 4) id += '-';\n    else id += abc[Math.ceil(Math.random() * 26) - 1];\n  }\n\n  return id;\n};\n\nconst setRoomId = (id) => {\n  if (window.location.hash) {\n    window.history.replaceState(null, null, `#${id}`);\n  } else {\n    window.location.hash = id;\n  }\n};\n\nconst getRoomId = () => {\n  return window.location.hash.substr(1);\n};\n\nexport { generateId, setRoomId, getRoomId };","export default __webpack_public_path__ + \"static/media/join.5e707cae.mp3\";","export default __webpack_public_path__ + \"static/media/message.f132cc09.mp3\";","import React, { createContext, useState, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport useSound from 'use-sound';\nimport Peer from 'simple-peer';\n\nimport { firestore } from '../../firebase';\n\nimport { generateId, setRoomId, getRoomId } from '../../utils/identify';\n\nimport joinSfx from '../../sounds/join.mp3';\nimport messageSfx from '../../sounds/message.mp3';\n\nconst AppContext = createContext();\n\n\nconst AppContextProvider = ({ children }) => {\n\n  const history = useHistory();\n\n  const [playJoinSfx] = useSound(joinSfx, { volume: 0.5 });\n  const [playMessageSfx] = useSound(messageSfx, { volume: 0.5 });\n\n  const [callLinkModalVisibility, setCallLinkModalVisibility] = useState(false);\n\n\n  // ╔══════════════════════════════════════════════════════════╗\n  // ║                    User Info Module                      ║                            \n  // ╚══════════════════════════════════════════════════════════╝\n\n  let [myName, _setMyName] = useState('Esperantisto');\n  let myNameRef = useRef('Esperantisto');\n\n  let [guestName, setGuestName] = useState('Esperantisto');\n\n  const setMyName = (name) => {\n    _setMyName(name);\n    myNameRef.current = name;\n\n    sendMyUserInfo({ name: name }); \n  };\n\n  const resetGuestName = () => setGuestName('Esperantisto'); \n\n  const sendMyUserInfo = (info) => {\n    if (isPeerConnected()) {\n      let data = 'i=' + JSON.stringify(info);\n      sendToPeer(data);\n    }\n  };\n\n  // ╔══════════════════════════════════════════════════════════╗\n  // ║                       Peer Module                        ║                            \n  // ╚══════════════════════════════════════════════════════════╝\n\n  let peer = useRef(null);\n  const [peerConnection, setPeerConnection] = useState(false);\n\n  // Set the peer configuration\n  const setPeer = (isInitiator) => {\n    peer.current = new Peer({\n      initiator: isInitiator,\n      trickle: false,\n      stream: localStream.current,\n      config: {\n        iceServers: [\n          { urls: \"stun:stun1.l.google.com:19302\" },\n          { urls: \"stun:stun2.l.google.com:19302\" },\n          { urls: \"stun:global.stun.twilio.com:3478\" }\n        ]\n      }\n    });\n\n    peer.current.on('connect', () => {\n      setPeerConnection(true);\n\n      sendMyUserInfo({ name: myNameRef.current });\n\n      playJoinSfx();\n\n      stopListenAnswer();\n      deleteSignal(getRoomId());\n      \n      console.log('CONNECTED!');\n    });\n\n    peer.current.on('close', () => {\n      console.warn('Connection closed');\n\n      setPeerConnection(false);\n\n      resetGuestName();\n      cleanGuestMediaStream();\n\n      if (callType.current === 'random') {\n        nextRandomCall();\n      } else if (window.location.hash) {\n        peer.current.destroy();\n        waitSignalServerConnection(reconnectCall);\n      }\n    });\n\n    peer.current.on('error', (err) => {\n      console.error('Connection error!');\n\n      console.log(err);\n    });\n\n    peer.current.on('signal', async data => {\n      let sdp = JSON.stringify(data);\n\n      if (data.sdp) {\n        let roomId = getRoomId();\n\n        if (peer.current.initiator) {\n          await pushOffer(roomId, sdp, callType.current);\n          setStopListenAnswer(listenAnswer(roomId, call));\n        } else {\n          await pushAnswer(roomId, sdp);\n        }\n      }\n    });\n\n    peer.current.on('stream', stream => {\n      guestStream.current = stream;\n      setGuestMediaStatus({ video: true, audio: true });\n    });\n\n    peer.current.on('data', data => {\n      let decodedData = new TextDecoder().decode(data);\n      let type = decodedData[0];\n      let corpus = decodedData.substr(2);\n\n      switch (type) {\n        case 'm': // Message\n          addMessage('guest', corpus);\n          playMessageSfx();\n          break;\n          \n        case 's': // Status\n          let status = JSON.parse(corpus);\n          setGuestMediaStatus(status);\n          break;\n\n        case 'i': // Info\n          let info = JSON.parse(corpus);\n          setGuestName(info.name);\n          break;\n\n        default:\n          break;\n      };\n    });\n  };\n\n  const isPeerSetted = () => !!peer.current;\n\n  const isPeerConnected = () => {\n    if (isPeerSetted()) {\n      return peer.current.connected;\n    } else {\n      return false;\n    }\n  };\n\n  const signalPeer = (sdp) => {\n    peer.current.signal(sdp);\n  };\n\n  const sendToPeer = (data) => {\n    if (isPeerConnected()) peer.current.send(data);\n  };\n\n  const destroyPeer = () => {\n    peer.current.destroy();\n    peer.current = null;\n\n    stopListenAnswer();\n  };\n\n  \n  // ╔══════════════════════════════════════════════════════════╗\n  // ║                      Signal Module                       ║\n  // ╚══════════════════════════════════════════════════════════╝\n\n  const callsDB = firestore.collection('calls');\n\n  // This stores a function that is redefined to stop the onSnapshot event for SDP answer.\n  const listenAnswerFinisher = useRef(() => 0);\n\n  const setStopListenAnswer = (finisher) => {\n    listenAnswerFinisher.current = finisher;\n  };\n\n  const stopListenAnswer = () => {\n    listenAnswerFinisher.current();\n\n    listenAnswerFinisher.current = () => 0;\n  };\n\n  const waitSignalServerConnection = async (callback) => {\n    firestore.collection('tests').doc('connection').get().then(doc => {\n      callback();\n    }).catch(err => {\n      waitSignalServerConnection(callback);\n    });\n  };\n  \n  const getSignal = async (id) => {\n    return await callsDB.doc(id).get();\n  };\n  \n  const getStatus = async (id) => {\n    let signal = await getSignal(id);\n    return signal.data() ? signal.data().status : undefined;\n  };\n  \n  const getOffer = async (id) => {\n    let signal = await getSignal(id);\n    return signal.data() ? signal.data().offer : undefined;\n  };\n  \n  const getAnswer = async (id) => {\n    let signal = await getSignal(id);\n    return signal.data() ? signal.data().answer : undefined;\n  };\n  \n  const getRandom = async () => {\n    let calls = await callsDB.where('type', '==', 'random').where('status', '==', 'open').where('date', '>', Date.now() - 60000);\n    let signal;\n  \n    await calls.get().then(snapshot => {\n      snapshot.forEach(doc => {\n        if (!signal) {\n          signal = doc.data();\n          signal.id = String(doc.id);\n        }\n      });\n    });\n  \n    return signal;\n  };\n\n  const updateSignalDate = async (id) => {\n    await callsDB.doc(id).update({\n      date: Date.now()\n    });\n  };\n\n  const signalDateRefresher = (id, milliseconds) => {\n    setTimeout(() => {\n      if (!peerConnection) {\n        updateSignalDate(id);\n        signalDateRefresher(id, milliseconds);\n      }\n    }, milliseconds);\n  };\n  \n  const pushOffer = async (id, offer, type = 'direct') => {\n    await callsDB.doc(id).set({ \n      type: type,\n      status: 'open',\n      date: Date.now(),\n      offer: offer,\n      answer: null\n    });\n\n    if (type === 'random') {\n      signalDateRefresher(id, 60000);\n    }\n  };\n  \n  const pushAnswer = async (id, answer) => {\n    await callsDB.doc(id).update({\n      status: 'signaling',\n      answer: answer\n    });\n  };\n  \n  const listenOffer = (id, callback) => {\n    return callsDB.doc(id).onSnapshot(doc => {\n      let data = doc.data();\n  \n      if (data.answer) callback(data.offer);\n    });\n  };\n  \n  const listenAnswer = (id, callback) => {\n    return callsDB.doc(id).onSnapshot(doc => {\n      let data = doc.data();\n  \n      if (data.answer) callback(data.answer);\n    });\n  };\n  \n  const deleteSignal = (id) => {\n    callsDB.doc(id).delete();\n  };\n\n\n  // ╔══════════════════════════════════════════════════════════╗\n  // ║                       Call Module                        ║\n  // ╚══════════════════════════════════════════════════════════╝\n\n  const callType = useRef(undefined);\n\n  // Call to other user by his SDP description\n  const call = (sdp) => {\n    if (!isPeerConnected()) {\n      signalPeer(JSON.parse(sdp));\n    }\n  };\n\n  const nextRandomCall = () => {\n    if (isPeerSetted()) {\n      destroyPeer();\n      cleanMessages();\n\n      randomCall();\n    }\n  };\n\n  const finishCall = () => {\n    callType.current = null;\n\n    destroyPeer();\n    cleanMessages();\n\n    history.replace('/');\n  };\n\n  const reconnectCall = async () => {\n    let offer = await getOffer(getRoomId());\n\n    if (offer) {\n      setPeer(false);\n      signalPeer(JSON.parse(offer));\n    } else {\n      setPeer(true);\n    }\n  };\n\n  const randomCall = async () => {\n    let randomSignal = await getRandom();\n\n    if (randomSignal) {\n      callType.current = 'random';\n      \n      setRoomId(randomSignal.id);\n\n      await getLocalStream(setPeer, false);\n\n      signalPeer(JSON.parse(randomSignal.offer));\n    } else {\n      startRoom('random');\n    }\n  };\n\n  const startRoom = (type, id = generateId()) => {\n    if (!callType.current) {\n      playJoinSfx();\n    }\n\n    callType.current = type;\n\n    setRoomId(id);\n\n    getLocalStream(setPeer, true);\n  };\n\n  const joinRoom = async (id) => {\n    callType.current = 'direct';\n\n    setRoomId(id);\n\n    await getLocalStream(setPeer, false);\n    \n    getOffer(id).then(offer => call(offer));\n  };\n\n\n  // ╔══════════════════════════════════════════════════════════╗\n  // ║                   Call Messages Module                   ║\n  // ╚══════════════════════════════════════════════════════════╝\n\n  const [Messages, setMessages] = useState([]);\n\n  const addMessage = (user, message) => {\n    setMessages(prevMessages => [...prevMessages, {\n      user: user,\n      text: message\n    }]);\n  };\n\n  const sendMessage = (message) => {\n    sendToPeer('m=' + message);\n    \n    addMessage('me', message);\n  };\n\n  const cleanMessages = () => {\n    setMessages([]);\n  };\n\n\n  // ╔══════════════════════════════════════════════════════════╗\n  // ║                       Media Module                       ║\n  // ╚══════════════════════════════════════════════════════════╝\n\n  const localStream = useRef(null);\n  const guestStream = useRef(null);\n  const [localMediaStatus, setLocalMediaStatus] = useState({video: false, audio: false });\n  const [guestMediaStatus, setGuestMediaStatus] = useState({ video: false, audio: false });\n  \n  const getLocalStream = async (callback, callbackParam) => {\n    return navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    }).then(stream => {\n      localStream.current = stream;\n      setLocalMediaStatus({ video: true, audio: true });\n\n      callback(callbackParam);\n    }).catch(err => {\n      alert('Cannot access user media');\n      console.log(err);\n      \n      history.replace('/');\n    });\n  };\n\n  const stopLocalStream = () => {\n    localStream.current.getTracks().forEach(track => track.stop());\n\n    //setLocalMediaStatus({ video: false, audio: false });\n  };\n\n  const cleanGuestMediaStream = () => {\n    guestStream.current = null;\n    setGuestMediaStatus({ video: false, audio: false });\n  };\n\n  // Send a message to the other user\n  // to update his guest's status\n  const sendStatus = (status) => {\n    let data = 's=' + JSON.stringify(status);\n    sendToPeer(data);\n  };\n  \n  \n  const enableLocalVideo = () => {\n    localStream.current.getVideoTracks()[0].enabled = true;\n\n    setLocalMediaStatus(prevStatus => {\n      let newStatus = { ...prevStatus, video: true };\n      sendStatus(newStatus);\n      return newStatus;\n    })\n  };\n  \n  const enableLocalAudio = () => {\n    localStream.current.getAudioTracks()[0].enabled = true;\n\n    setLocalMediaStatus(prevStatus => {\n      let newStatus = { ...prevStatus, audio: true };\n      sendStatus(newStatus);\n      return newStatus;\n    })\n  };\n  \n  \n  const disableLocalVideo = () => {\n    localStream.current.getVideoTracks()[0].enabled = false;\n\n    setLocalMediaStatus(prevStatus => {\n      let newStatus = { ...prevStatus, video: false };\n      sendStatus(newStatus);\n      return newStatus;\n    })\n  };\n  \n  const disableLocalAudio = () => {\n    localStream.current.getAudioTracks()[0].enabled = false;\n    \n    setLocalMediaStatus(prevStatus => {\n      let newStatus = { ...prevStatus, audio: false };\n      sendStatus(newStatus);\n      return newStatus;\n    })\n  };\n\n\n  return (\n    <AppContext.Provider value={{\n      callLinkModalVisibility,\n      setCallLinkModalVisibility,\n      myName, // User Info Module's Start\n      setMyName,\n      guestName,\n      setGuestName, // User Info Module's End\n      peerConnection, // Peer Module's Start\n      isPeerSetted,\n      isPeerConnected,\n      destroyPeer, // Peer Module's End\n      callType, // Call Module's Start\n      call,\n      nextRandomCall,\n      finishCall,\n      reconnectCall,\n      randomCall,\n      startRoom,\n      joinRoom, // Call Module's End\n      Messages, // Call Messages Module's Start\n      sendMessage, // Call Messages Module's End\n      getLocalStream, // Media Module's Start\n      stopLocalStream,\n      localStream,\n      guestStream,\n      localMediaStatus,\n      guestMediaStatus,\n      enableLocalVideo,\n      enableLocalAudio,\n      disableLocalVideo,\n      disableLocalAudio // Media Module's End\n    }}>\n      { children }\n    </AppContext.Provider>\n  );\n\n\n};\n\nexport { AppContext, AppContextProvider };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n  id: \"_clipPath_miueK3jXmeFS1FyeJldLr8l21kV7qYOq\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  x: 868.32,\n  y: 317,\n  width: 617.539,\n  height: 654.322\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  clipPath: \"url(#_clipPath_miueK3jXmeFS1FyeJldLr8l21kV7qYOq)\"\n}, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1383.257 517.076 C 1354.019 495.219 1308.225 474.547 1257.617 460.363 C 1211.539 447.447 1166.596 441.212 1131.057 442.804 L 1130.872 438.671 C 1166.834 437.061 1212.244 443.348 1258.734 456.379 C 1309.813 470.696 1356.103 491.612 1385.734 513.763 L 1383.257 517.076 Z \",\n  fill: \"rgb(204,204,204)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1380.221 533.913 C 1380.247 553.278 1376.187 572.432 1368.307 590.121 Q 1367.32 592.343 1366.251 594.523 C 1338.026 652.333 1273.644 683.021 1210.962 668.541 C 1148.281 654.061 1103.882 598.245 1103.872 533.913 Q 1103.872 529.116 1104.199 524.393 Q 1104.354 521.992 1104.6 519.619 C 1112.21 446.483 1175.763 392.115 1249.196 395.924 C 1322.629 399.732 1380.218 460.381 1380.221 533.913 L 1380.221 533.913 Z \",\n  fill: \"rgb(0,153,0)\"\n}), /*#__PURE__*/React.createElement(\"g\", {\n  opacity: 0.1\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1368.307 590.121 Q 1367.32 592.343 1366.251 594.523 Q 1360.194 595.181 1353.501 595.479 C 1349.806 595.644 1346.004 595.727 1342.12 595.727 C 1308.189 595.727 1267.353 589.464 1225.635 577.773 C 1179.144 564.741 1137.084 546.514 1107.198 526.445 Q 1105.672 525.421 1104.199 524.393 Q 1104.354 521.992 1104.6 519.619 Q 1106.977 521.313 1109.503 523.012 C 1139.036 542.84 1180.675 560.873 1226.752 573.789 C 1268.105 585.381 1308.557 591.59 1342.099 591.59 Q 1347.852 591.59 1353.315 591.346 Q 1361.27 590.986 1368.307 590.121 Z \",\n  fill: \"rgb(0,0,0)\"\n})), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1342.12 592.418 C 1308.19 592.419 1267.352 586.155 1225.636 574.463 C 1179.146 561.432 1137.083 543.204 1107.198 523.136 C 1076.688 502.65 1062.382 482.463 1066.914 466.295 C 1071.445 450.127 1094.159 440.316 1130.872 438.671 L 1131.057 442.804 C 1113.913 443.572 1099.941 446.121 1089.529 450.378 C 1079.143 454.625 1072.874 460.356 1070.897 467.412 C 1068.919 474.467 1071.296 482.621 1077.962 491.648 C 1084.644 500.696 1095.256 510.135 1109.504 519.702 C 1139.034 539.531 1180.674 557.564 1226.753 570.479 C 1268.107 582.07 1308.555 588.281 1342.1 588.282 Q 1347.849 588.282 1353.313 588.038 C 1370.458 587.269 1384.43 584.721 1394.841 580.464 C 1405.227 576.217 1411.496 570.486 1413.474 563.43 C 1417.024 550.761 1406.293 534.299 1383.257 517.076 L 1385.734 513.763 C 1397.588 522.626 1406.364 531.362 1411.816 539.728 C 1417.661 548.697 1419.559 557.048 1417.457 564.547 C 1412.925 580.715 1390.211 590.525 1353.499 592.171 C 1349.804 592.336 1346.005 592.418 1342.12 592.418 Z \",\n  fill: \"rgb(204,204,204)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1245.7020099999975,\n  cy: 369.234829999999,\n  r: 1.5833500000001095,\n  fill: \"rgb(242,242,242)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1035.64502,\n  cy: 436.80077999999986,\n  r: 2.723899999999958,\n  fill: \"rgb(204,204,204)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1029.83942,\n  cy: 543.4126199999997,\n  r: 5.38101000000006,\n  fill: \"rgb(204,204,204)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1352.84163,\n  cy: 378.73489,\n  r: 3.586309999999912,\n  fill: \"rgb(204,204,204)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1480.03694,\n  cy: 527.57918,\n  r: 5.822779999999966,\n  fill: \"rgb(204,204,204)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1434.5056799999968,\n  cy: 434.57998999999916,\n  r: 2.498239999999896,\n  fill: \"rgb(204,204,204)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1131.1734600000004,\n  cy: 402.4850600000002,\n  r: 3.897330000000011,\n  fill: \"rgb(204,204,204)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1425.7618499999974,\n  cy: 515.7723899999994,\n  r: 2.498239999999896,\n  fill: \"rgb(204,204,204)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1042.5061799999999,\n  cy: 619.4131600000001,\n  r: 3.109390000000076,\n  fill: \"rgb(204,204,204)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1105.31216,\n  cy: 662.69122,\n  r: 3.3672899999999117,\n  fill: \"rgb(204,204,204)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1203.2 323.645 L 1196.555 323.645 L 1196.555 317 L 1192.99 317 L 1192.99 323.645 L 1186.342 323.645 L 1186.342 327.213 L 1192.99 327.213 L 1192.99 333.858 L 1196.555 333.858 L 1196.555 327.213 L 1203.2 327.213 L 1203.2 323.645 L 1203.2 323.645 Z \",\n  fill: \"rgb(204,204,204)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1357.342 683.201 L 1353.168 683.201 L 1353.168 679.029 L 1350.93 679.029 L 1350.93 683.201 L 1346.758 683.201 L 1346.758 685.44 L 1350.93 685.44 L 1350.93 689.612 L 1353.168 689.612 L 1353.168 685.44 L 1357.342 685.44 L 1357.342 683.201 L 1357.342 683.201 Z \",\n  fill: \"rgb(204,204,204)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1453.646 661.844 L 1450.527 661.844 L 1450.527 658.725 L 1448.852 658.725 L 1448.852 661.844 L 1445.733 661.844 L 1445.733 663.519 L 1448.852 663.519 L 1448.852 666.638 L 1450.527 666.638 L 1450.527 663.519 L 1453.646 663.519 L 1453.646 661.844 L 1453.646 661.844 Z \",\n  fill: \"rgb(204,204,204)\"\n}), /*#__PURE__*/React.createElement(\"g\", {\n  opacity: 0.1\n}, /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1244.1187,\n  cy: 425.71736999999956,\n  r: 11.611190000000079,\n  fill: \"rgb(0,0,0)\"\n})), /*#__PURE__*/React.createElement(\"g\", {\n  opacity: 0.1\n}, /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1154.92363,\n  cy: 510.6901699999999,\n  r: 11.611190000000079,\n  fill: \"rgb(0,0,0)\"\n})), /*#__PURE__*/React.createElement(\"g\", {\n  opacity: 0.1\n}, /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1283.17451,\n  cy: 627.32987,\n  r: 11.611190000000079,\n  fill: \"rgb(0,0,0)\"\n})), /*#__PURE__*/React.createElement(\"g\", {\n  opacity: 0.1\n}, /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1244.1187,\n  cy: 528.6347499999999,\n  r: 11.611190000000079,\n  fill: \"rgb(0,0,0)\"\n})), /*#__PURE__*/React.createElement(\"g\", {\n  opacity: 0.1\n}, /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1160.72921,\n  cy: 592.49629,\n  r: 11.611190000000079,\n  fill: \"rgb(0,0,0)\"\n})), /*#__PURE__*/React.createElement(\"g\", {\n  opacity: 0.1\n}, /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1306.3969,\n  cy: 466.3565399999995,\n  r: 11.611190000000079,\n  fill: \"rgb(0,0,0)\"\n})), /*#__PURE__*/React.createElement(\"g\", {\n  opacity: 0.1\n}, /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1344.92492,\n  cy: 544.9959699999999,\n  r: 11.611190000000079,\n  fill: \"rgb(0,0,0)\"\n})), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1244.1187,\n  cy: 477.96774000000016,\n  r: 15.305669999999964,\n  fill: \"rgb(255,255,255)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1244.119 455.801 C 1238.38 455.801 1232.876 458.081 1228.818 462.139 C 1224.76 466.197 1222.48 471.701 1222.48 477.44 C 1222.48 489.391 1244.119 528.635 1244.119 528.635 C 1244.119 528.635 1265.758 489.391 1265.758 477.44 C 1265.758 471.701 1263.478 466.197 1259.42 462.139 C 1255.362 458.081 1249.858 455.801 1244.119 455.801 L 1244.119 455.801 Z  M 1244.119 487.996 C 1238.58 487.996 1234.091 483.506 1234.091 477.968 C 1234.091 472.429 1238.58 467.94 1244.119 467.94 C 1249.657 467.94 1254.147 472.429 1254.147 477.968 C 1254.147 480.627 1253.09 483.178 1251.21 485.058 C 1249.329 486.939 1246.778 487.996 1244.119 487.996 L 1244.119 487.996 Z \",\n  fill: \"rgb(58,65,72)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1160.7292099999997,\n  cy: 543.4126200000001,\n  r: 15.305650000000014,\n  fill: \"rgb(255,255,255)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1160.729 521.246 C 1154.99 521.246 1149.486 523.526 1145.428 527.584 C 1141.37 531.642 1139.09 537.146 1139.09 542.885 C 1139.09 554.836 1160.729 594.08 1160.729 594.08 C 1160.729 594.08 1182.368 554.836 1182.368 542.885 C 1182.368 537.146 1180.088 531.642 1176.03 527.584 C 1171.972 523.526 1166.468 521.246 1160.729 521.246 L 1160.729 521.246 Z  M 1160.729 553.44 C 1155.191 553.44 1150.701 548.951 1150.701 543.413 C 1150.701 537.874 1155.191 533.385 1160.729 533.385 C 1166.268 533.385 1170.757 537.874 1170.757 543.413 C 1170.757 546.072 1169.701 548.623 1167.82 550.503 C 1165.939 552.384 1163.389 553.44 1160.729 553.44 L 1160.729 553.44 Z \",\n  fill: \"rgb(58,65,72)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1344.92492,\n  cy: 495.9123000000002,\n  r: 15.305669999999964,\n  fill: \"rgb(255,255,255)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1344.925 473.745 C 1339.186 473.745 1333.682 476.025 1329.624 480.083 C 1325.566 484.142 1323.286 489.646 1323.286 495.385 C 1323.286 507.335 1344.925 546.579 1344.925 546.579 C 1344.925 546.579 1366.564 507.335 1366.564 495.385 C 1366.564 489.646 1364.284 484.142 1360.226 480.083 C 1356.168 476.025 1350.664 473.745 1344.925 473.745 L 1344.925 473.745 Z  M 1344.925 505.94 C 1339.387 505.94 1334.897 501.45 1334.897 495.912 C 1334.897 490.374 1339.387 485.884 1344.925 485.884 C 1350.463 485.884 1354.953 490.374 1354.953 495.912 C 1354.953 498.572 1353.896 501.122 1352.016 503.003 C 1350.135 504.884 1347.585 505.94 1344.925 505.94 L 1344.925 505.94 Z \",\n  fill: \"rgb(58,65,72)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1244.1187,\n  cy: 375.0503500000001,\n  r: 15.305669999999964,\n  fill: \"rgb(255,255,255)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1244.119 352.884 C 1232.168 352.884 1222.48 362.572 1222.48 374.523 C 1222.48 386.473 1244.119 425.717 1244.119 425.717 C 1244.119 425.717 1265.758 386.473 1265.758 374.523 C 1265.758 368.784 1263.478 363.28 1259.42 359.221 C 1255.362 355.163 1249.858 352.884 1244.119 352.884 L 1244.119 352.884 Z  M 1244.119 385.078 C 1238.58 385.078 1234.091 380.589 1234.091 375.05 C 1234.091 369.512 1238.58 365.022 1244.119 365.022 C 1249.657 365.022 1254.147 369.512 1254.147 375.05 C 1254.147 377.71 1253.09 380.261 1251.21 382.141 C 1249.329 384.022 1246.778 385.078 1244.119 385.078 L 1244.119 385.078 Z \",\n  fill: \"rgb(58,65,72)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1283.1745100000003,\n  cy: 578.2462000000002,\n  r: 15.305669999999964,\n  fill: \"rgb(255,255,255)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1283.174 556.079 C 1277.435 556.079 1271.932 558.359 1267.873 562.417 C 1263.815 566.475 1261.536 571.979 1261.536 577.718 C 1261.536 589.669 1283.174 628.913 1283.174 628.913 C 1283.174 628.913 1304.814 589.669 1304.814 577.718 C 1304.814 571.979 1302.534 566.475 1298.476 562.417 C 1294.417 558.359 1288.914 556.079 1283.174 556.079 Z  M 1283.174 588.274 C 1277.636 588.274 1273.147 583.784 1273.147 578.246 C 1273.147 572.708 1277.636 568.218 1283.175 568.218 C 1288.713 568.218 1293.202 572.708 1293.202 578.246 C 1293.202 580.906 1292.146 583.456 1290.265 585.337 C 1288.385 587.218 1285.834 588.274 1283.174 588.274 L 1283.174 588.274 Z \",\n  fill: \"rgb(62,117,232)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1154.9236300000005,\n  cy: 460.5509400000001,\n  r: 15.305669999999964,\n  fill: \"rgb(255,255,255)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1154.924 438.384 C 1149.185 438.384 1143.681 440.664 1139.623 444.722 C 1135.564 448.78 1133.285 454.284 1133.285 460.023 C 1133.285 471.974 1154.924 511.218 1154.924 511.218 C 1154.924 511.218 1176.563 471.974 1176.563 460.023 C 1176.563 454.284 1174.283 448.78 1170.225 444.722 C 1166.167 440.664 1160.663 438.384 1154.924 438.384 L 1154.924 438.384 Z  M 1154.924 470.579 C 1149.385 470.579 1144.896 466.089 1144.896 460.551 C 1144.896 455.013 1149.385 450.523 1154.924 450.523 C 1160.462 450.523 1164.952 455.013 1164.952 460.551 C 1164.952 463.21 1163.895 465.761 1162.014 467.642 C 1160.134 469.522 1157.583 470.579 1154.924 470.579 L 1154.924 470.579 Z \",\n  fill: \"rgb(62,117,232)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1306.3969000000004,\n  cy: 417.80065000000013,\n  r: 15.305669999999964,\n  fill: \"rgb(255,255,255)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1306.397 395.634 C 1300.658 395.634 1295.154 397.914 1291.096 401.972 C 1287.038 406.03 1284.758 411.534 1284.758 417.273 C 1284.758 429.224 1306.397 468.468 1306.397 468.468 C 1306.397 468.468 1328.036 429.224 1328.036 417.273 C 1328.036 405.322 1318.348 395.634 1306.397 395.634 L 1306.397 395.634 Z  M 1306.397 427.829 C 1300.859 427.829 1296.369 423.339 1296.369 417.801 C 1296.369 412.262 1300.859 407.773 1306.397 407.773 C 1311.935 407.773 1316.425 412.262 1316.425 417.801 C 1316.425 423.339 1311.935 427.829 1306.397 427.829 L 1306.397 427.829 L 1306.397 427.829 Z \",\n  fill: \"rgb(62,117,232)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1040.862 959.715 L 1053.044 958.332 L 1053.509 910.688 L 1035.53 912.729 L 1040.862 959.715 L 1040.862 959.715 Z \",\n  fill: \"rgb(255,184,184)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1077.82 966.978 L 1039.535 971.322 L 1037.857 956.53 L 1061.35 953.865 C 1069.519 952.938 1076.893 958.809 1077.82 966.978 L 1077.82 966.978 L 1077.82 966.978 Z \",\n  fill: \"rgb(81,79,125)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 915.582 958.954 L 927.842 958.953 L 933.674 911.665 L 915.58 911.666 L 915.582 958.954 L 915.582 958.954 Z \",\n  fill: \"rgb(255,184,184)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 951.486 970.336 L 912.956 970.338 L 912.955 955.451 L 936.599 955.45 C 944.821 955.45 951.486 962.115 951.486 970.336 L 951.486 970.336 L 951.486 970.336 Z \",\n  fill: \"rgb(81,79,125)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1003.544 747.486 L 1010.544 770.255 L 1048.544 852.486 L 1058.544 930.486 L 1035.544 931.486 L 1021.544 859.486 L 973.544 807.486 L 931.544 943.486 L 912.544 941.486 C 912.544 941.486 928.544 765.486 950.544 747.486 C 950.544 747.486 986.544 730.486 1003.544 747.486 Z \",\n  fill: \"rgb(62,117,232)\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 972.4923699999996,\n  cy: 624.6788999999997,\n  r: 24.56102999999996,\n  fill: \"rgb(255,184,184)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1006.044 751.986 C 1006.044 751.986 1009.044 649.986 967.044 656.986 C 967.044 656.986 942.544 762.486 942.544 762.486 C 942.544 762.486 951.544 780.486 973.544 760.486 C 995.544 740.486 1006.044 751.986 1006.044 751.986 Z \",\n  fill: \"rgb(204,204,204)\"\n}), /*#__PURE__*/React.createElement(\"g\", {\n  opacity: 0.2\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 948.044 699.986 L 957.927 737.869 L 972.984 752.927 L 952.044 745.986 L 948.044 699.986 L 948.044 699.986 Z \",\n  fill: \"rgb(0,0,0)\"\n})), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1006.354 795.124 C 1003.556 794.11 1001.351 791.908 1000.333 789.112 C 999.314 786.316 999.587 783.212 1001.077 780.636 L 977.718 753.593 L 996.132 751.196 L 1015.491 777.244 C 1019.746 780.097 1021.195 785.681 1018.864 790.243 C 1016.533 794.804 1011.159 796.902 1006.354 795.124 L 1006.354 795.124 Z \",\n  fill: \"rgb(255,184,184)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 977.914 677.762 L 980.544 729.486 L 1011.544 769.486 L 998.544 779.486 L 956.544 737.486 C 956.544 737.486 941.544 686.486 952.544 671.486 C 956.669 665.861 961.215 664.314 965.288 664.578 C 972.221 665.155 977.636 670.81 977.914 677.762 Z \",\n  fill: \"rgb(204,204,204)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 969.571 650.486 C 969.809 650.273 969.933 649.96 969.904 649.642 C 969.876 649.324 969.7 649.038 969.428 648.87 C 964.985 646.118 962.4 641.16 962.687 635.942 C 962.973 630.725 966.087 626.08 970.804 623.832 C 978.025 620.389 987.81 623.068 993.148 616.452 C 995.345 613.587 996.186 609.909 995.451 606.375 C 994.299 600.126 989.602 595.485 984.341 592.305 C 971.157 584.335 954.589 584.551 941.617 592.861 C 928.645 601.171 921.523 616.131 923.252 631.439 C 923.931 637.453 925.786 644.197 922.21 649.08 C 919.063 653.377 913.122 654.183 907.904 655.251 C 896.71 657.541 885.912 662.825 878.316 671.359 C 870.72 679.894 866.668 691.868 868.958 703.061 C 871.248 714.254 880.436 724.091 891.729 725.826 C 900.92 727.238 910.411 723.334 917.161 716.938 C 923.911 710.541 928.178 701.902 930.869 693.001 C 934.063 682.435 935.323 671.05 941.09 661.639 C 946.733 652.429 958.894 645.827 968.425 650.623 C 968.798 650.819 969.254 650.764 969.571 650.486 L 969.571 650.486 Z \",\n  fill: \"rgb(47,46,65)\"\n})));\n\nfunction SvgHomeIllustration(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    style: {\n      isolation: \"isolate\"\n    },\n    viewBox: \"868.32 317 617.539 654.322\",\n    width: \"617.539pt\",\n    height: \"654.322pt\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgHomeIllustration);\nexport default __webpack_public_path__ + \"static/media/home-illustration.da5a3adb.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\n//CSS\nimport './BalloonButton.css'\n\nconst BalloonButton = ({ side, text, classNames, onClick }) => {\n    return (\n        <button onClick={onClick} className={ `balloon ${side} ${classNames}` }>\n            { text }\n        </button>\n    )\n}\n\nexport default BalloonButton;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n  id: \"_clipPath_F9BYBxqDrYUx2Jp5tMEr1OpUUSLQ0HZi\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  x: 835,\n  y: 409,\n  width: 481,\n  height: 481\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"circle\", {\n  vectorEffect: \"non-scaling-stroke\",\n  cx: 1075.5000000000005,\n  cy: 649.4999999999999,\n  r: 240.50000000000023,\n  fill: \"rgb(0,153,0)\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1201.859 711.025 L 1162 688.012 L 1122.141 665 C 1107.802 656.721 1107.802 643.279 1122.141 635 L 1162 611.988 L 1201.859 588.975 C 1216.198 580.696 1227.84 587.418 1227.84 603.975 L 1227.84 650 L 1227.84 696.025 C 1227.84 712.582 1216.198 719.304 1201.859 711.025 Z \",\n  fill: \"rgb(255,255,255)\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \" M 1052.999 584.931 L 1034.641 631.493 L 983.511 634.187 L 1023.258 665.766 L 1010.106 714.069 L 1052.999 686.911 L 1095.891 714.069 L 1082.739 665.766 L 1122.489 634.187 L 1071.359 631.493 L 1052.999 584.931 Z \",\n  fill: \"rgb(0,153,0)\"\n});\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    style: {\n      isolation: \"isolate\"\n    },\n    viewBox: \"835 409 481 481\",\n    width: \"481pt\",\n    height: \"481pt\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#_clipPath_F9BYBxqDrYUx2Jp5tMEr1OpUUSLQ0HZi)\"\n  }, _ref3, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 974 556 L 1132 556 C 1148.557 556 1162 569.443 1162 586 L 1162 714 C 1162 730.557 1148.557 744 1132 744 L 974 744 C 957.443 744 944 730.557 944 714 L 944 586 C 944 569.443 957.443 556 974 556 Z\",\n    style: {\n      stroke: \"none\",\n      fill: \"#FFFFFF\",\n      strokeMiterlimit: 10\n    }\n  }), _ref4, _ref5));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.23bd1ad2.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { ReactComponent as Isotype } from '../../assets/logo.svg';\n\nimport '../../index.css';\n\nfunction Logo({ textColor, linkTo = '#' }) {\n  return (\n    <div className={ textColor === 'black' ? 'text-black' : 'text-white' }>\n      <Link to={ linkTo }>\n        <Isotype className=\"inline-block w-8 h-8 mr-3 md:w-10 md:h-10\" />\n        <span className=\"inline-block text-3xl tracking-wide align-middle md:text-4xl alata-font\">videovoko</span>\n      </Link>\n    </div>\n  );\n}\n\nexport default Logo;","import React, { useState } from 'react';\nimport Logo from '../logo/Logo';\nimport { Link } from \"react-router-dom\";\nimport BalloonButton from '../balloon-button/BalloonButton';\n\nimport '../../index.css';\n\nfunction NavBar({ classNames }) {\n  const [menuVisibility, setMenuVisibility] = useState(false);\n\n  const handleMenuVisibility = () => {\n    setMenuVisibility(prev => !prev);\n  };\n\n  return (\n    <div className={ `flex justify-between py-3 ${classNames || ''}` }>\n      <div className=\"flex items-end\">\n        <Logo textColor=\"white\" linkTo=\"/\" />\n\n        <div className=\"hidden space-x-10 md:block\">\n          <Link to=\"/call\" \n            className=\"hidden mt-auto text-2xl text-gray-light hover:text-secondary\" href=\"#\">\n            About\n          </Link>\n\n          <a\n            href=\"https://github.com/videovoko/videovoko-org/\"\n            className=\"mt-auto text-2xl text-gray-light hover:text-secondary\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n          >\n            Donate\n          </a>\n          \n          <a\n            href=\"https://github.com/videovoko/videovoko-org/\"\n            className=\"mt-auto text-2xl text-gray-light hover:text-secondary\" href=\"https://github.com/videovoko/videovoko-org\"\n            target=\"_blank\" rel=\"noopener noreferrer\"\n          >\n            GitHub\n          </a>\n        </div>\n      </div>\n\n      <div className=\"hidden space-x-5\">\n        <BalloonButton classNames=\"bg-trasparent text-white font-semibold roboto-font text-sm border-4 border-gray h-10 py-1\"\n          side=\"left\" text=\"Sign In\" />\n        <BalloonButton classNames=\"bg-secondary text-white font-semibold roboto-font text-sm border-secondary h-10 py-1\"\n          side=\"right\" text=\"Sign Up\" />\n      </div>\n\n      { /* Open mobile menu button */ }\n      <button\n        onClick={ handleMenuVisibility }\n        className=\"block md:hidden focus:outline-none\"\n      >\n        <svg\n          className=\"text-white w-7 h-7\"\n          xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"\n        >\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\n        </svg>\n      </button>\n\n      { /* Mobile Menu */ }\n      <div\n        className={\n          \"fixed top-0 flex flex-col justify-center left-0 z-10 w-screen h-screen pt-4 bg-dark-secondary\" +\n          (menuVisibility ? \" block\" : \" hidden\")\n        }\n      >\n        { /* Header with close button */ }\n        <div className=\"flex justify-end pr-3 mb-10\">\n          <button onClick={ handleMenuVisibility } className=\"focus:outline-none\">\n            <svg\n              className=\"text-white w-7 h-7\" \n              xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"\n            >\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        { /* Menu items */ }\n        <div className=\"flex flex-col h-full\">\n          <div className=\"flex flex-col\">\n\n            <Link to=\"/about\" \n              onClick={ handleMenuVisibility }\n              className=\"hidden mb-6 text-3xl text-gray-ligh\" href=\"#\">\n              About\n            </Link>\n\n            <a\n              onClick={ handleMenuVisibility }\n              href=\"https://github.com/videovoko/videovoko-org/\"\n              className=\"mb-6 text-3xl text-gray-light\"\n              target=\"_blank\" rel=\"noopener noreferrer\"\n            >\n              Donate\n            </a>\n            \n            <a\n              onClick={ handleMenuVisibility }\n              href=\"https://github.com/videovoko/videovoko-org/\"\n              className=\"text-3xl text-gray-light\" href=\"https://github.com/videovoko/videovoko-org\"\n              target=\"_blank\" rel=\"noopener noreferrer\"\n            >\n              GitHub\n            </a>\n\n          </div>\n\n          <div className=\"flex items-end justify-center h-full\">\n            <p className=\"text-lg text-left text-gray-400 roboto-font\">\n              © 2021 videovoko\n            </p>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  );\n}\n\nexport default NavBar;","import React, { useState } from 'react';\n\nimport '../../index.css';\n\nfunction Modal({ id, title, ref, children, initialVisibility = false }) {\n  const [visibility, setVisibility] = useState(initialVisibility);\n\n  const handleVisibility = (e) => {\n    if (e.target.id === id) {\n      setVisibility(prevVisibility => !prevVisibility);\n    }\n  };\n\n  const hideModal = () => {\n    setVisibility(false);\n  };\n  \n  return (\n    <div\n    id={ id }\n    ref={ ref }\n    onClick={ handleVisibility }\n    className={`\n      ${ !visibility ? 'hidden' : '' }\n      fixed inset-0 inset-x-0 z-50 flex items-center w-full h-full bg-black bg-opacity-70\n    `}\n    >\n\n      <div className=\"w-5/6 mx-auto text-white rounded-lg md:w-1/3 bg-dark-tertiary\">\n        <div className=\"flex justify-between px-5 py-3 mb-5 text-4xl md:text-2xl\">\n          { title }\n\n          <button onClick={hideModal} className=\"focus:outline-none\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-8 h-8 md:w-6 md:h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"h-full\">\n          { children }\n        </div>\n      </div>\n\n    </div>\n  );\n};\n\nexport default Modal;","import React from 'react';\n\nconst Input = ({ type, value, classNames, placeholder, onChange, onKeyDown, maxLength }) => {\n  return(\n    <input\n      type={ type }\n      className={`${classNames || ''} h-10 px-4 py-1 mr-2 overflow-auto border-2 border-solid rounded-lg resize-none border-gray bg-dark-secondary focus:outline-none`}\n      value={ value }\n      onChange={ onChange }\n      onKeyDown={ onKeyDown }\n      placeholder={ placeholder }\n      maxlength={ maxLength }\n    ></input>\n  );\n};\n\nexport default Input;","import React from 'react';\n\nimport '../../index.css';\n\nfunction Button({ type, onClick, classNames, children, disabled }) {\n  return (\n    <button\n      type={type}\n      onClick={onClick}\n      className={`inline-flex items-center px-2 py-1 rounded-lg focus:outline-none disabled:opacity-50 ${classNames || ''}`}\n      disabled={ disabled }\n      >\n      { children }\n    </button>\n  );\n}\n\nexport default Button;","import React, { useContext, useState } from 'react';\n\nimport { AppContext } from '../../contexts/AppContext/AppContext';\n\nimport Modal from './Modal';\nimport Input from '../input/Input';\nimport Button from '../button/Button';\n\nconst RoomModal = ({ id, title }) => {\n  const [roomId, setRoomId] = useState();\n  const isValidId = !/^[a-z]{4}-[a-z]{4}$/.test(roomId);\n\n  const {\n    setCallLinkModalVisibility,\n    startRoom,\n    joinRoom\n  } = useContext(AppContext);\n\n\n  const _startRoom = () => {\n    setCallLinkModalVisibility(true);\n    \n    startRoom('direct');\n  };\n\n  const _joinRoom = () => {\n    setCallLinkModalVisibility(false);\n    \n    joinRoom(roomId);\n  };\n\n  const handleInputChange = (e) => {\n    let value = e.target.value;\n\n    value = value.length === 4 && value.length > roomId.length ? `${value}-` : value;\n\n    setRoomId(value);\n  };\n\n\n  return (\n    <Modal id={ id } title={ title }>\n      <div className=\"flex flex-col px-5 pb-5\">\n        <div classNames=\"text-center\">\n          <Button\n            onClick={ _startRoom }\n            classNames='h-10 px-20 text-xl bg-primary hover:bg-primary-dark'\n          >\n            Start Room\n          </Button>\n        </div>\n\n        <span className=\"py-6\">Or join with ID:</span>\n\n        <div className=\"space-x-1\">\n          <Input\n            classNames=\"w-36 pl-5 text-xl focus:border-primary\"\n            type=\"text\"\n            maxLength=\"9\"\n            placeholder=\"aaaa-bbbb\"\n            value={ roomId }\n            onChange={ handleInputChange }\n          />\n\n          <Button\n            onClick={ _joinRoom }\n            classNames='w-auto h-10 text-xl bg-secondary hover:bg-secondary-dark'\n            disabled={ isValidId }\n          >\n            Join Room\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default RoomModal;\n","import React, { useContext } from 'react';\n\nimport { AppContext } from '../../contexts/AppContext/AppContext';\n\nimport { ReactComponent as HomeIllustration } from '../../assets/home-illustration.svg';\n\nimport BalloonButton from '../../components/balloon-button/BalloonButton';\nimport NavBar from '../../components/nav-bar/NavBar';\nimport RoomModal from '../../components/modals/RoomModal';\n\nfunction Home() {\n  const {\n    setCallLinkModalVisibility,\n    isPeerSetted,\n    destroyPeer,\n    randomCall,\n    stopLocalStream\n  } = useContext(AppContext);\n\n  const openRoomModal = () => {\n    document.getElementById('roomModal').click();\n  };\n\n  const _randomCall = () => {\n    setCallLinkModalVisibility(false);\n\n    randomCall();\n  }\n\n\n  if (isPeerSetted()) {\n    destroyPeer();\n    //stopLocalStream();\n  }\n\n  \n  return (\n    <div className=\"flex flex-col w-full h-full px-3 md:h-screen md:px-24 bg-dark\">\n      <NavBar classNames=\"\" />\n\n      <div className=\"grid content-center justify-center h-full grid-cols-2 pt-3 md:pt-0\">\n\n        {/* Illustration */}\n        <div className=\"flex justify-center order-1 w-full h-full col-span-2 mb-8 md:col-span-1 md:order-2 md:mb-0\">\n          <HomeIllustration className=\"object-none object-center w-3/5 h-full md:w-10/12\" />\n        </div>\n\n        {/* Text and call to action*/}\n        <div className=\"flex flex-col order-2 w-full h-auto col-span-2 md:col-span-1 md:order-1\">\n          \n          <div className=\"flex flex-col w-full h-full md:justify-center\">\n            <h1 className=\"mb-3 text-2xl font-bold leading-snug text-center text-white md:text-left md:leading-snug md:text-5xl roboto-font\">\n              Speak Esperanto With Someone Around The World\n              <font className=\"text-esperanto\">.</font>\n            </h1>\n            \n            <p className=\"text-lg leading-normal text-center md:text-left md:leading-normal md:w-9/12 md:text-2xl mb-7 text-gray-light roboto-font\">\n              <span className=\"hidden md:block\">\n                Be part of the hub of esperanto speakers and promote this beautiful language.\n              </span>\n\n              <span className=\"md:hidden\">\n              Be part of the hub of esperanto speakers.\n              </span>\n            </p>\n\n            <div className=\"grid grid-cols-1 mt-3 md:mt-0 md:w-max md:grid-cols-2 md:space-x-5 md:justify-start\">          \n              <BalloonButton\n                onClick={ openRoomModal }\n                classNames=\"md:w-auto w-full text-2xl md:text-3xl text-white roboto-font font-medium bg-dark-tertiary hover:bg-gray border-dark-tertiary hover:border-gray\"\n                side=\"left\"\n                text=\"Call Friend\"\n              />\n\n              <BalloonButton\n                onClick={ _randomCall }\n                classNames=\"md:w-auto my-3 md:my-0 w-full text-2xl md:text-3xl text-white roboto-font font-medium bg-esperanto hover:bg-esperanto-dark border-esperanto hover:border-esperanto-dark\"\n                side=\"right\"\n                text=\"Random Call\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"hidden py-1 md:block\">\n        <p className=\"text-lg text-left text-gray-400 roboto-font\">\n          © 2021 videovoko\n        </p>\n      </div>\n\n      <RoomModal id=\"roomModal\" title=\"Call Friend\" />\n    </div>\n  );\n}\n\nexport default Home;","import React from 'react';\nimport Linkify from 'react-linkify';\n\nimport '../../index.css';\nimport './ChatMessage.css';\n\nfunction ChatMessage({ text, side, classNames }) {\n  const componentDecorator = (href, text, key) => (\n    <a\n      href={ href }\n      key={ key }\n      target=\"_blank\"\n      className=\"font-bold text-secondary-dark\"\n    >\n      {text}\n    </a>\n  );\n\n  return (\n    <div className={ side === 'left' ? 'pr-6' : 'pl-6' }>\n      <div className={ `message ${side} ${classNames || ''}` }>\n        <Linkify componentDecorator={ componentDecorator }>\n          { text }\n        </Linkify>\n      </div>\n    </div>\n  );\n}\n\nexport default ChatMessage;","import React, { useState } from 'react';\nimport Button from '../button/Button';\n\nimport '../../index.css';\n\nfunction ChatInput({ placeholder, onSend }) {\n  const [message, setMessage] = useState();\n\n  const handleChange = (e) => {\n    let value = e.target.value;\n    \n    let lastChar = value[value.length - 1];\n\n    if (value && lastChar.toLowerCase() === 'x') {\n      let specialLetter = value[value.length - 2];\n      let beforeSpecialLetter = value.slice(0, value.length - 2);\n\n      switch (specialLetter) {\n        case 'C':\n          value = beforeSpecialLetter + 'Ĉ';\n          break;\n        case 'c':\n          value = beforeSpecialLetter + 'ĉ';\n          break;\n\n        case 'G':\n          value = beforeSpecialLetter + 'Ĝ';\n          break;\n        case 'g':\n          value = beforeSpecialLetter + 'ĝ';\n\n        case 'H':\n          value = beforeSpecialLetter + 'Ĥ';\n          break;\n        case 'h':\n          value = beforeSpecialLetter + 'ĥ';\n          break;\n\n        case 'J':\n          value = beforeSpecialLetter + 'Ĵ';\n          break;\n        case 'j':\n          value = beforeSpecialLetter + 'ĵ';\n          break;\n\n        case 'S':\n          value = beforeSpecialLetter + 'Ŝ';\n          break;\n        case 's':\n          value = beforeSpecialLetter + 'ŝ';\n          break;\n\n        case 'U':\n          value = beforeSpecialLetter + 'Ŭ';\n          break;\n        case 'u':\n          value = beforeSpecialLetter + 'ŭ';\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    setMessage(value);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.keyCode === 13 && e.shiftKey === false) {\n      e.preventDefault();\n      handleSubmit();\n    }\n  };\n\n  const handleSubmit = (e) => {\n    if (e) e.preventDefault();\n    \n    if (message.trim()) onSend(message);\n    \n    setMessage('');\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"flex p-3 border-t-2 border-gray\">\n      <textarea\n        className=\"w-full h-10 px-4 py-1 mr-2 overflow-auto border-2 border-solid rounded-lg resize-none border-gray bg-dark-secondary focus:outline-none focus:border-primary\"\n        value={message}\n        onChange={handleChange}\n        onKeyDown={handleKeyDown}\n        placeholder={placeholder}\n      ></textarea>\n\n      <Button type=\"submit\" classNames='transform rotate-90 bg-primary hover:bg-primary-dark'>\n        <svg className=\"w-6 h-6\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n          <path d=\"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z\" />\n        </svg>\n      </Button>\n    </form>\n  );\n}\n\nexport default ChatInput;","import React, { useContext, useRef, useEffect } from 'react';\n\nimport { AppContext } from '../../contexts/AppContext/AppContext';\n\nimport ChatMessage from '../chat-message/ChatMessage';\nimport ChatInput from '../chat-input/ChatInput';\n\nimport '../../index.css';\nimport './Chat.css'\n\nfunction Chat() {\n  const { Messages, sendMessage } = useContext(AppContext);\n  const messagesAnchor = useRef();\n\n  const handleChatInput = (message) => {\n    sendMessage(message);\n  }\n\n  useEffect(() => {\n    messagesAnchor.current.scrollIntoView({ behavior: \"smooth\" });\n  });\n\n  const messageList = Messages.map((message, index) => {\n    const localUser = message.user === 'me';\n\n    return (\n      <ChatMessage\n        kk={ index }\n        text={ message.text }\n        side={ localUser ? 'right' : 'left' }\n        classNames={ localUser ? 'bg-primary' : 'bg-gray' }\n      />\n    );\n  });\n  \n  return (\n      <div className=\"flex flex-col w-full h-full overflow-hidden\">\n        <div className=\"flex flex-col h-full px-3 pb-1 overflow-x-hidden overflow-y-auto\">\n          <div className=\"h-full\"></div>\n\n          { messageList }\n          \n          <div ref={ messagesAnchor }></div>\n        </div>\n\n        <div className=\"w-full\">\n          <ChatInput\n            onSend={ handleChatInput }\n            placeholder=\"Aa\"\n          />\n        </div>\n      </div>\n  );\n}\n\nexport default Chat;","import React from 'react';\n\nimport '../../index.css';\n\nfunction CopyableBadge({ text, buttonColor, classNames }) {\n  return (\n    <div\n      className={`\n      ${classNames || ''}\n        inline-flex items-center px-3 py-2 rounded-lg bg-dark w-max text-gray-light\n      `}\n    >\n\n      <span className=\"font-bold text-md\">\n        { text }\n      </span>\n\n      <button\n        onClick={ () => navigator.clipboard.writeText(text) }\n        className=\"ml-3 focus:outline-none\"\n      >\n        <svg\n          className={`\n            ${ buttonColor || 'text-secondary' }\n            w-6 h-6\n          `}\n          xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"\n        >\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n        </svg>\n      </button>\n    </div>\n  );\n}\n\nexport default CopyableBadge;","import React, { useContext, useState, useRef, useEffect } from 'react';\n\nimport { AppContext } from '../../contexts/AppContext/AppContext';\n\nimport Modal from './Modal';\nimport Input from '../input/Input';\nimport Button from '../button/Button';\n\nconst UserInfoModal = ({ id, title, onSubmit, initialVisibility }) => {\n  const { myName, setMyName } = useContext(AppContext);\n\n  const [name, setName] = useState(myName);\n\n  useEffect(() => {\n    document.querySelector(`#${id} input`).focus();\n  });\n\n  const handleInputChange = (e) => {\n    let value = e.target.value;\n\n    setName(value);\n  };\n\n  const handleKeyDown= (e) => {\n    if (e.keyCode === 13) {\n      //e.preventDefault();\n      submitName();\n    }\n  };\n\n  const submitName = () => {\n    setMyName(name);\n    \n    onSubmit();\n\n    document.getElementById(id).click();\n  };\n\n\n  return (\n    <Modal\n      id={ id }\n      title={ title }\n      initialVisibility={ initialVisibility }\n    >\n      <div className=\"flex flex-col px-5 pb-5\">\n\n        <p className=\"pb-6 text-xl\">\n          Set your name:\n        </p>\n\n        <div>\n          <Input\n            classNames=\"w-2/4 text-xl focus:border-primary mb-3 text-center\"\n            type=\"text\"\n            maxLength=\"20\"\n            placeholder={ myName }\n            onChange={ handleInputChange }\n            onKeyDown={ handleKeyDown }\n            autoFocus\n          />\n\n          <Button\n            onClick={ submitName }\n            classNames='h-10 text-xl bg-primary hover:bg-primary-dark'\n          >\n            Continue\n          </Button>\n        </div>\n        \n      </div>\n    </Modal>\n  );\n};\n\nexport default UserInfoModal;\n","import React, { useState } from 'react';\n\nimport '../../index.css';\n\nfunction SecondaryModal({ id, title, classNames, ref, children, initialVisibility = false, onClose }) {\n  const [visibility, setVisibility] = useState(initialVisibility);\n\n  const hideModal = () => {\n    setVisibility(false);\n    onClose();\n  };\n  \n  return (\n    <div\n      id={ id }\n      ref={ ref }\n      className={`\n        ${ classNames || '' }\n        ${ !visibility ? 'hidden' : '' }\n        fixed z-40 w-max text-white rounded-lg top-20 left-6 md:w-max bg-dark-tertiary\n      `}\n    >\n      <div className=\"flex justify-between px-5 py-3 mb-5 text-4xl md:text-2xl\">\n        { title }\n\n        <button onClick={ hideModal } className=\"focus:outline-none\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-8 h-8 md:w-6 md:h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        </button>\n      </div>\n\n      <div className=\"h-full\">\n        { children }\n      </div>\n    </div>\n  );\n};\n\nexport default SecondaryModal;","import React, { useContext } from 'react';\n\nimport { getRoomId } from '../../utils/identify'\n\nimport { AppContext } from '../../contexts/AppContext/AppContext';\n\nimport SecondaryModal from './SecondaryModal';\nimport CopyableBadge from '../copyable-badge/CopyableBadge';\n\nconst CallLinkModal = ({ id, classNames }) => {\n  const {\n    setCallLinkModalVisibility\n  } = useContext(AppContext);\n\n  return (\n    <SecondaryModal\n      id={ id }\n      title={ 'Invite a friend' }\n      classNames={ classNames }\n      initialVisibility={ true }\n      onClose={ () => setCallLinkModalVisibility(false) }\n    >\n      <div className=\"flex flex-col px-5 pb-5\">\n\n        <p className=\"mb-3 text-xl\">\n          Share this call link to your friend:\n        </p>\n        \n        <CopyableBadge\n          classNames=\"mx-auto\"\n          text={ `${ window.location.origin }/#${ getRoomId() }` }\n        />\n      </div>\n    </SecondaryModal>\n  );\n};\n\nexport default CallLinkModal;\n","import React, { useEffect, useRef } from 'react';\nimport { useContext } from 'react';\n\nimport { AppContext } from '../../contexts/AppContext/AppContext';\n\nimport '../../index.css';\nimport './UserVideoBox.css';\n\nfunction UserVideoBox({ user, name, color, onClickVideo }) {\n  const videoRef = useRef();\n\n  const {\n    localStream,\n    guestStream,\n    localMediaStatus,\n    guestMediaStatus\n  } = useContext(AppContext);\n\n  const stream = user === 'local' ? localStream.current : guestStream.current;\n  const mediaStatus = user === 'local' ? localMediaStatus : guestMediaStatus;\n\n  useEffect(() => {\n    let video = videoRef.current;\n    \n    if (video && !video.srcObject && stream) {\n      video.srcObject = stream;\n      video.play();\n    }\n  });\n\n  return (\n    <div className=\"relative flex flex-wrap content-center justify-center border-2 border-solid rounded-lg bg-dark-secondary border-gray medium-size\">\n      { !mediaStatus.video &&\n        <div\n          className={\n            `${color || ''}\n            flex flex-wrap content-center justify-center w-24 h-24 my-auto text-5xl text-white rounded-full`\n          }\n        >\n          {name[0]}\n        </div>\n      }\n      \n      <video\n        id={`${user}-video`}\n        ref={videoRef}\n        onClick={onClickVideo}\n        className={\n          `${user === 'local' ? 'mirrored' : ''}\n          ${!mediaStatus.video ? 'hidden' : ''}\n          w-full h-full bg-black rounded-lg`\n        }\n        muted={user === 'local'}\n      ></video>\n\n      <div className=\"absolute bottom-0 left-0 px-2 py-1 text-white rounded-tr-lg rounded-bl-md bg-dark-tertiary\">\n        {name}\n      </div>\n    </div>\n  );\n}\n\nexport default UserVideoBox;","import React, { useContext } from 'react';\n\nimport { AppContext } from '../../contexts/AppContext/AppContext';\n\nimport Button from '../button/Button';\n\nimport '../../index.css';\n\nfunction CallControls() {\n  const {\n    setCallLinkModalVisibility,\n    callType,\n    nextRandomCall,\n    finishCall,\n    localMediaStatus,\n    enableLocalVideo,\n    enableLocalAudio,\n    disableLocalVideo,\n    disableLocalAudio\n  } = useContext(AppContext);\n  \n\n  const handleVideoButton = () => {\n    if (localMediaStatus.video) disableLocalVideo();\n    else enableLocalVideo();\n  }\n\n  const handleAudioButton = () => {\n    if (localMediaStatus.audio) disableLocalAudio();\n    else enableLocalAudio();\n  }\n\n  const handleNextCallButton = () => {\n    nextRandomCall();\n  }\n\n  const handleFinishCallButton = () => {\n    setCallLinkModalVisibility(false);\n    \n    finishCall();\n  }\n  \n\n  return (\n    <div className=\"relative flex content-center justify-center space-x-3\">\n      { /* Volume Button */ }\n      <Button classNames=\"invisible h-10 w-10 justify-center bg-dark-tertiary hover:bg-gray text-white absolute bottom-0 left-3\">\n        <svg className=\"w-5 h-5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n          <path fillRule=\"evenodd\" d=\"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z\" clipRule=\"evenodd\" />\n        </svg>\n\n        <svg className=\"hidden w-5 h-5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n          <path fillRule=\"evenodd\" d=\"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n        </svg>\n      </Button>\n\n      \n      { /* Audio Button */ }\n      <Button\n        onClick={ handleAudioButton }\n        classNames={\n          `${ localMediaStatus.audio ? 'text-white' : 'text-gray-500' }\n          h-10 w-10 justify-center bg-dark-tertiary hover:bg-gray`\n        }\n      >\n        <svg className=\"w-5 h-5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n          <path fillRule=\"evenodd\" d=\"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z\" clipRule=\"evenodd\" />\n        </svg>\n      </Button>\n\n      { /* Video Button */ }\n      <Button\n        onClick={ handleVideoButton }\n        classNames={\n          `${ localMediaStatus.video ? 'text-white' : 'text-gray-500' }\n          h-10 w-10 justify-center bg-dark-tertiary hover:bg-gray`\n        }\n      >\n        <svg class=\"h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n          <path d=\"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z\" />\n        </svg>\n      </Button>\n\n      { /* Finish Call Button */ }\n      <Button\n        onClick={ handleFinishCallButton }\n        classNames=\"h-10 px-4 bg-danger hover:bg-danger-dark text-white\"\n      >\n        <svg className=\"w-6 h-6 rotate-135\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n          <path d=\"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z\" />\n        </svg>\n\n        <span className=\"ml-2 text-lg\">Finish Call</span>\n      </Button>\n\n      { /* Next Call Button */ }\n      { callType.current === 'random' &&\n        <Button\n          onClick={ handleNextCallButton }\n          classNames=\"h-10 px-4 bg-primary hover:bg-primary-dark text-white\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-5 h-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n            <path d=\"M17.924 2.617a.997.997 0 00-.215-.322l-.004-.004A.997.997 0 0017 2h-4a1 1 0 100 2h1.586l-3.293 3.293a1 1 0 001.414 1.414L16 5.414V7a1 1 0 102 0V3a.997.997 0 00-.076-.383z\" />\n            <path d=\"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z\" />\n          </svg>\n\n          \n            <span className=\"ml-2 text-lg\">Next Call</span>\n        </Button>\n      }\n\n\n      { /* Expand Button */ }\n      <Button classNames=\"invisible h-10 w-10 justify-center bg-dark-tertiary hover:bg-gray text-white absolute right-3\">\n        <svg className=\"w-5 h-5\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4\" />\n        </svg>\n      </Button>\n    </div>\n  );\n}\n\nexport default CallControls;","import React, { useContext, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { getRoomId } from '../../utils/identify'\n\nimport { AppContext } from '../../contexts/AppContext/AppContext';\n\nimport Logo from '../../components/logo/Logo';\nimport Chat from '../../components/chat/Chat';\nimport CopyableBadge from '../../components/copyable-badge/CopyableBadge';\nimport UserInfoModal from '../../components/modals/UserInfoModal';\nimport CallLinkModal from '../../components/modals/CallLinkModal';\nimport UserVideoBox from '../../components/user-video-box/UserVideoBox';\nimport CallControls from '../../components/call-controls/CallControls';\n\nfunction CallRoom() {\n  const { \n    callLinkModalVisibility,\n    myName,\n    guestName,\n    isPeerConnected,\n    callType,\n    joinRoom,\n    peerConnection\n  } = useContext(AppContext);\n\n  useEffect(() => {\n    window.onbeforeunload = (e) => {\n      if (isPeerConnected()) {\n        return 'Are you sure you want to leave?';\n      }\n    };\n  });\n\n  const joinByLink = () => {\n    if (!callType.current) {\n      joinRoom(getRoomId());\n    }\n  };\n  \n  return (\n    <div className=\"grid w-full h-screen grid-cols-8 overflow-hidden bg-dark\">\n      <UserInfoModal\n        id={ 'userInfoModal' }\n        title={ 'User Name' }\n        initialVisibility={ true }\n        onSubmit={ joinByLink }\n      />\n\n      { callLinkModalVisibility &&\n        <CallLinkModal />\n      }\n\n      <div className=\"flex flex-col h-full col-span-6 main-panel\">\n        <div className=\"py-3\">\n          <Logo textColor=\"white\" linkTo=\"/\" />\n        </div>\n\n        <div className=\"flex flex-wrap content-center justify-center w-full h-full space-x-8 video-area\">\n          <UserVideoBox\n            user=\"local\"\n            name={ myName }\n            color=\"bg-primary\"\n          />\n\n          { peerConnection &&\n            <UserVideoBox\n              user=\"remote\"\n              name={ guestName }\n              color=\"bg-primary\"\n            />\n          }\n        </div>\n\n        <div className=\"py-3\">\n          <CallControls />\n        </div>\n      </div>\n\n      <div className=\"flex flex-col h-full col-span-2 overflow-hidden text-white rounded-l-lg bg-dark-tertiary side-panel\">\n        <div className=\"py-3 border-b-2 border-solid border-gray\">\n          <span className=\"text-xl font-bold text-secondary\">\n            { getRoomId() }\n          </span>\n        </div>\n        <Chat />\n        <span></span>\n      </div>\n    </div>\n  );\n}\n\nexport default CallRoom;","import './App.css';\n\nimport {\n  HashRouter,\n  Switch,\n  Route\n} from \"react-router-dom\";\n\nimport { AppContextProvider } from './contexts/AppContext/AppContext';\n\nimport Home from './pages/Home/Home';\nimport CallRoom from './pages/CallRoom/CallRoom';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <HashRouter hashType={ 'noslash' }>\n        <AppContextProvider>\n          <Switch>\n            <Route\n              exact\n              path=\"/:id\"\n              render={({ match }) => {\n                if (!/^[a-z]{4}-[a-z]{4}$/.test(match.params.id)) {\n                  return <Home />;\n                }\n                \n                return <CallRoom />;\n              }}\n            />\n\n            <Route path='/'>\n              <Home />\n            </Route>\n          </Switch>\n        </AppContextProvider>\n      </HashRouter>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport './firebase';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}